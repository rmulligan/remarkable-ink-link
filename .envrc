layout python

# Load environment variables from .env file
dotenv

# Automatically activate the local .venv if it exists
if [ -d ".venv" ]; then
    export VIRTUAL_ENV="$(pwd)/.venv"
    export PATH="$VIRTUAL_ENV/bin:$PATH"
    echo "‚úÖ Using local .venv directory"
# Otherwise use poetry's venv if present
elif [ -f pyproject.toml ]; then
  export VIRTUAL_ENV=$(poetry env info --path 2>/dev/null)
  if [ -n "$VIRTUAL_ENV" ] && [ -d "$VIRTUAL_ENV" ]; then
    export PATH="$VIRTUAL_ENV/bin:$PATH"
    echo "‚úÖ Using Poetry virtual environment"
  fi
fi

# Add project scripts directory to PATH
PATH_add scripts

# Set project-specific environment variables
export PROJECT_ROOT="$(pwd)"
export PYTHONPATH="${PROJECT_ROOT}/src:${PYTHONPATH}"

# Display notice when entering the directory
echo "üîó InkLink environment activated with direnv"
echo "‚úÖ Environment variables loaded from .env"
echo "üêç Python: $(which python)"
echo "üì¶ Virtual env: ${VIRTUAL_ENV}"
